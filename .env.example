# ===========================================
# Title Protocol 環境変数
# ===========================================
# .env.example → .env にコピーして値を設定する。
# .env は .gitignore 済み。

# --- 共通 ---
SOLANA_RPC_URL=https://api.devnet.solana.com
# Helius等の専用RPCを推奨:
# SOLANA_RPC_URL=https://devnet.helius-rpc.com/?api-key=YOUR_KEY

# --- Gateway (crates/gateway) ---
GATEWAY_SIGNING_KEY=            # Ed25519秘密鍵（64文字hex）。未設定時はランダム生成（開発用）
TEE_ENDPOINT=http://localhost:4000
S3_ENDPOINT=http://localhost:9000
S3_PUBLIC_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=title-uploads
# GATEWAY_SOLANA_KEYPAIR=        # sign-and-mint用Solanaウォレット（Base58、オプション）

# --- TEE (crates/tee) ---
TEE_RUNTIME=mock                # "mock" | "nitro"
MOCK_MODE=true                  # true = MockRuntime使用
PROXY_ADDR=direct               # "direct" | "vsock:8000" | "tcp:127.0.0.1:8000"
COLLECTION_MINT=                # cNFTコレクションのMintアドレス
GATEWAY_PUBKEY=                 # Gateway認証用Ed25519公開鍵（Base58、省略可）
TRUSTED_EXTENSIONS=phash-v1,hardware-google,c2pa-training-v1,c2pa-license-v1
WASM_DIR=/wasm-modules

# --- Proxy (crates/proxy) ---
# Linux: vsock port 8000 (自動)
# macOS: TCP 127.0.0.1:8000 (自動)

# --- Indexer (indexer/) ---
DATABASE_URL=postgres://title:title_dev@localhost:5432/title_indexer
DAS_ENDPOINTS=https://api.devnet.solana.com
COLLECTION_MINTS=               # 監視対象コレクションMint（カンマ区切り）
WEBHOOK_SECRET=                 # Webhook認証シークレット

# --- DB (docker-compose.production.yml) ---
DB_USER=title
DB_PASSWORD=                    # PostgreSQLパスワード（本番用compose必須）

# --- Enclave (deploy/setup-ec2.sh) ---
ENCLAVE_CPU_COUNT=2             # Enclaveに割り当てるvCPU数
ENCLAVE_MEMORY_MIB=1024         # Enclaveに割り当てるメモリ（MiB）。EIFサイズにより最低704MB必要

# ===========================================
# 本番 (AWS EC2 + Nitro) 設定例
# ===========================================
# 以下をコメント解除して設定する。
#
# SOLANA_RPC_URL=https://devnet.helius-rpc.com/?api-key=YOUR_KEY
# GATEWAY_SIGNING_KEY=<64文字hex — openssl rand -hex 32 で生成>
# TEE_ENDPOINT=http://localhost:4000
# TEE_RUNTIME=nitro
# MOCK_MODE=false
# PROXY_ADDR=vsock:8000
#
# # AWS S3 (terraform output から取得)
# S3_ENDPOINT=https://s3.ap-northeast-1.amazonaws.com
# S3_PUBLIC_ENDPOINT=https://s3.ap-northeast-1.amazonaws.com
# S3_ACCESS_KEY=<terraform output s3_access_key_id>
# S3_SECRET_KEY=<terraform output -raw s3_secret_access_key>
# S3_BUCKET=title-uploads-devnet
#
# # Global Config
# COLLECTION_MINT=<コレクションMintアドレス>
# GATEWAY_PUBKEY=<Gatewayの公開鍵 Base58>
#
# # PostgreSQL
# DB_PASSWORD=<強力なパスワード — openssl rand -base64 24 で生成>
# DATABASE_URL=postgres://title:<password>@localhost:5432/title_indexer
#
# # DAS (Helius推奨)
# DAS_ENDPOINTS=https://devnet.helius-rpc.com/?api-key=YOUR_KEY
#
# # Title Config Program ID (anchor deploy後に更新)
# TITLE_CONFIG_PROGRAM_ID=C2HryYkBKeoc4KE2RJ6au1oXc1jtKeKw3zrknQ455JQN
